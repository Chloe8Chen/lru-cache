function cov_1div2ee98p(){var path="/Users/chen/Projects/lru-cache/LruCache.js";var hash="8f9f9c662181ce97c2f8fadcfae9a850ee787215";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/chen/Projects/lru-cache/LruCache.js",statementMap:{"0":{start:{line:12,column:4},end:{line:14,column:5}},"1":{start:{line:13,column:6},end:{line:13,column:63}},"2":{start:{line:15,column:4},end:{line:17,column:5}},"3":{start:{line:16,column:6},end:{line:16,column:73}},"4":{start:{line:18,column:4},end:{line:18,column:20}},"5":{start:{line:19,column:4},end:{line:19,column:16}},"6":{start:{line:26,column:4},end:{line:26,column:21}},"7":{start:{line:27,column:4},end:{line:27,column:30}},"8":{start:{line:28,column:4},end:{line:28,column:30}},"9":{start:{line:29,column:4},end:{line:29,column:30}},"10":{start:{line:30,column:4},end:{line:30,column:30}},"11":{start:{line:31,column:4},end:{line:31,column:31}},"12":{start:{line:39,column:4},end:{line:46,column:5}},"13":{start:{line:40,column:22},end:{line:40,column:44}},"14":{start:{line:41,column:22},end:{line:41,column:44}},"15":{start:{line:42,column:6},end:{line:42,column:43}},"16":{start:{line:43,column:6},end:{line:43,column:43}},"17":{start:{line:44,column:6},end:{line:44,column:30}},"18":{start:{line:45,column:6},end:{line:45,column:31}},"19":{start:{line:54,column:4},end:{line:54,column:25}},"20":{start:{line:55,column:4},end:{line:55,column:30}},"21":{start:{line:56,column:4},end:{line:56,column:33}},"22":{start:{line:57,column:4},end:{line:57,column:30}},"23":{start:{line:58,column:4},end:{line:58,column:25}},"24":{start:{line:66,column:16},end:{line:66,column:20}},"25":{start:{line:69,column:4},end:{line:75,column:5}},"26":{start:{line:70,column:6},end:{line:70,column:37}},"27":{start:{line:71,column:22},end:{line:71,column:46}},"28":{start:{line:72,column:6},end:{line:72,column:22}},"29":{start:{line:73,column:6},end:{line:73,column:31}},"30":{start:{line:74,column:6},end:{line:74,column:31}},"31":{start:{line:76,column:4},end:{line:76,column:16}},"32":{start:{line:87,column:4},end:{line:87,column:20}},"33":{start:{line:88,column:20},end:{line:88,column:44}},"34":{start:{line:89,column:4},end:{line:89,column:29}},"35":{start:{line:90,column:4},end:{line:90,column:29}},"36":{start:{line:92,column:4},end:{line:95,column:5}},"37":{start:{line:93,column:6},end:{line:93,column:37}},"38":{start:{line:94,column:6},end:{line:94,column:31}},"39":{start:{line:105,column:4},end:{line:105,column:18}},"40":{start:{line:106,column:4},end:{line:106,column:22}},"41":{start:{line:107,column:4},end:{line:107,column:20}},"42":{start:{line:108,column:4},end:{line:108,column:20}},"43":{start:{line:111,column:0},end:{line:111,column:26}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:11,column:2},end:{line:11,column:3}},loc:{start:{line:11,column:21},end:{line:20,column:3}},line:11},"1":{name:"(anonymous_1)",decl:{start:{line:25,column:2},end:{line:25,column:3}},loc:{start:{line:25,column:11},end:{line:32,column:3}},line:25},"2":{name:"(anonymous_2)",decl:{start:{line:38,column:2},end:{line:38,column:3}},loc:{start:{line:38,column:15},end:{line:47,column:3}},line:38},"3":{name:"(anonymous_3)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:21},end:{line:59,column:3}},line:53},"4":{name:"(anonymous_4)",decl:{start:{line:65,column:2},end:{line:65,column:3}},loc:{start:{line:65,column:12},end:{line:77,column:3}},line:65},"5":{name:"(anonymous_5)",decl:{start:{line:85,column:2},end:{line:85,column:3}},loc:{start:{line:85,column:19},end:{line:96,column:3}},line:85},"6":{name:"(anonymous_6)",decl:{start:{line:104,column:2},end:{line:104,column:3}},loc:{start:{line:104,column:53},end:{line:109,column:3}},line:104}},branchMap:{"0":{loc:{start:{line:12,column:4},end:{line:14,column:5}},type:"if",locations:[{start:{line:12,column:4},end:{line:14,column:5}},{start:{line:12,column:4},end:{line:14,column:5}}],line:12},"1":{loc:{start:{line:15,column:4},end:{line:17,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:17,column:5}},{start:{line:15,column:4},end:{line:17,column:5}}],line:15},"2":{loc:{start:{line:15,column:8},end:{line:15,column:30}},type:"binary-expr",locations:[{start:{line:15,column:8},end:{line:15,column:16}},{start:{line:15,column:20},end:{line:15,column:30}}],line:15},"3":{loc:{start:{line:39,column:4},end:{line:46,column:5}},type:"if",locations:[{start:{line:39,column:4},end:{line:46,column:5}},{start:{line:39,column:4},end:{line:46,column:5}}],line:39},"4":{loc:{start:{line:69,column:4},end:{line:75,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:75,column:5}},{start:{line:69,column:4},end:{line:75,column:5}}],line:69},"5":{loc:{start:{line:92,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:92,column:4},end:{line:95,column:5}},{start:{line:92,column:4},end:{line:95,column:5}}],line:92},"6":{loc:{start:{line:104,column:27},end:{line:104,column:38}},type:"default-arg",locations:[{start:{line:104,column:34},end:{line:104,column:38}}],line:104},"7":{loc:{start:{line:104,column:40},end:{line:104,column:51}},type:"default-arg",locations:[{start:{line:104,column:47},end:{line:104,column:51}}],line:104}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0],"7":[0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8f9f9c662181ce97c2f8fadcfae9a850ee787215"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1div2ee98p=function(){return actualCoverage;};}return actualCoverage;}cov_1div2ee98p();/**
 * This is the implementation of a LRU (least recently used) cache
 * To set up and run the code please check README.md
 */class LruChache{/**
   * The constructor of the cache
   * This defines the maximum size of the cache and resets cache to empty
   * @param {number} size
   */constructor(size){cov_1div2ee98p().f[0]++;cov_1div2ee98p().s[0]++;if(typeof size!=='number'){cov_1div2ee98p().b[0][0]++;cov_1div2ee98p().s[1]++;throw new Error('The size for Cache should be a number!');}else{cov_1div2ee98p().b[0][1]++;}cov_1div2ee98p().s[2]++;if((cov_1div2ee98p().b[2][0]++,size<1)||(cov_1div2ee98p().b[2][1]++,size>100)){cov_1div2ee98p().b[1][0]++;cov_1div2ee98p().s[3]++;throw new Error('Size of the Cache needs to be between 1 and 100!');}else{cov_1div2ee98p().b[1][1]++;}cov_1div2ee98p().s[4]++;this.size=size;cov_1div2ee98p().s[5]++;this.reset();}/**
   * This resets the cache
   */reset(){cov_1div2ee98p().f[1]++;cov_1div2ee98p().s[6]++;this.storage={};cov_1div2ee98p().s[7]++;this.head=new LinkNode();cov_1div2ee98p().s[8]++;this.tail=new LinkNode();cov_1div2ee98p().s[9]++;this.head.next=this.tail;cov_1div2ee98p().s[10]++;this.tail.prev=this.head;cov_1div2ee98p().s[11]++;this.totalNumberOfItems=0;}/**
   * This deletes an item from the cache using the key
   * @param {*} key The key of the item to be delete
   */delete(key){cov_1div2ee98p().f[2]++;cov_1div2ee98p().s[12]++;if(this.storage[key]){cov_1div2ee98p().b[3][0]++;const oldNext=(cov_1div2ee98p().s[13]++,this.storage[key].next);const oldPrev=(cov_1div2ee98p().s[14]++,this.storage[key].prev);cov_1div2ee98p().s[15]++;this.storage[key].prev.next=oldNext;cov_1div2ee98p().s[16]++;this.storage[key].next.prev=oldPrev;cov_1div2ee98p().s[17]++;delete this.storage[key];cov_1div2ee98p().s[18]++;this.totalNumberOfItems--;}else{cov_1div2ee98p().b[3][1]++;}}/**
   * This is a private method to add an item to the front of the cache
   * @param {LinkNode} node
   */_addToFront(node){cov_1div2ee98p().f[3]++;cov_1div2ee98p().s[19]++;node.prev=this.head;cov_1div2ee98p().s[20]++;node.next=this.head.next;cov_1div2ee98p().s[21]++;this.storage[node.key]=node;cov_1div2ee98p().s[22]++;this.head.next.prev=node;cov_1div2ee98p().s[23]++;this.head.next=node;}/**
   * This gets/reads the value of an item from the cache
   * @param {*} key the key of the item to get from the cache
   */get(key){cov_1div2ee98p().f[4]++;let value=(cov_1div2ee98p().s[24]++,null);// while reading the value, this item is moved to the front/top of the cache
// indicating this item is recently used
cov_1div2ee98p().s[25]++;if(this.storage[key]){cov_1div2ee98p().b[4][0]++;cov_1div2ee98p().s[26]++;value=this.storage[key].value;const newNode=(cov_1div2ee98p().s[27]++,new LinkNode(key,value));cov_1div2ee98p().s[28]++;this.delete(key);cov_1div2ee98p().s[29]++;this._addToFront(newNode);cov_1div2ee98p().s[30]++;this.totalNumberOfItems++;}else{cov_1div2ee98p().b[4][1]++;}cov_1div2ee98p().s[31]++;return value;}/**
   * This adds an item if it's not already in the cache,
   * and updates the item if it is already in.
   * @param {*} key the key of the item to add/update
   * @param {*} value the value of the item to add/update
   */put(key,value){cov_1div2ee98p().f[5]++;cov_1div2ee98p().s[32]++;// if the key already exists, delete it first so we can add it back to the head of the list later
this.delete(key);const newNode=(cov_1div2ee98p().s[33]++,new LinkNode(key,value));cov_1div2ee98p().s[34]++;this._addToFront(newNode);cov_1div2ee98p().s[35]++;this.totalNumberOfItems++;// if the cache is at capacity, the last item in the cache (least used item) will be removed
cov_1div2ee98p().s[36]++;if(this.totalNumberOfItems>this.size){cov_1div2ee98p().b[5][0]++;cov_1div2ee98p().s[37]++;this.delete(this.tail.prev.key);cov_1div2ee98p().s[38]++;this.totalNumberOfItems--;}else{cov_1div2ee98p().b[5][1]++;}}}/**
 * This class is an implementation of the doubly linked list data structure
 * This ensures fast lookups and fast updates (O(1))
 */class LinkNode{constructor(key,value,prev=(cov_1div2ee98p().b[6][0]++,null),next=(cov_1div2ee98p().b[7][0]++,null)){cov_1div2ee98p().f[6]++;cov_1div2ee98p().s[39]++;this.key=key;cov_1div2ee98p().s[40]++;this.value=value;cov_1div2ee98p().s[41]++;this.prev=prev;cov_1div2ee98p().s[42]++;this.next=next;}}cov_1div2ee98p().s[43]++;module.exports=LruChache;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkxydUNhY2hlLmpzIl0sIm5hbWVzIjpbIkxydUNoYWNoZSIsImNvbnN0cnVjdG9yIiwic2l6ZSIsIkVycm9yIiwicmVzZXQiLCJzdG9yYWdlIiwiaGVhZCIsIkxpbmtOb2RlIiwidGFpbCIsIm5leHQiLCJwcmV2IiwidG90YWxOdW1iZXJPZkl0ZW1zIiwiZGVsZXRlIiwia2V5Iiwib2xkTmV4dCIsIm9sZFByZXYiLCJfYWRkVG9Gcm9udCIsIm5vZGUiLCJnZXQiLCJ2YWx1ZSIsIm5ld05vZGUiLCJwdXQiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoidXpMQWVZOzJGQWZaOzs7R0FJQSxLQUFNQSxDQUFBQSxTQUFVLENBQ2Q7Ozs7S0FLQUMsV0FBVyxDQUFFQyxJQUFGLENBQVEsaURBQ2pCLEdBQUksTUFBUUEsQ0FBQUEsSUFBUixHQUFrQixRQUF0QixDQUFnQyxvREFDOUIsS0FBTSxJQUFJQyxDQUFBQSxLQUFKLENBQVUsd0NBQVYsQ0FBTixDQUNELENBRkQsaUNBRGlCLHdCQUlqQixHQUFJLDRCQUFBRCxJQUFJLENBQUcsQ0FBUCwrQkFBWUEsSUFBSSxDQUFHLEdBQW5CLENBQUosQ0FBNEIsb0RBQzFCLEtBQU0sSUFBSUMsQ0FBQUEsS0FBSixDQUFVLGtEQUFWLENBQU4sQ0FDRCxDQUZELGlDQUppQix3QkFPakIsS0FBS0QsSUFBTCxDQUFZQSxJQUFaLENBUGlCLHdCQVFqQixLQUFLRSxLQUFMLEdBQ0QsQ0FFRDs7S0FHQUEsS0FBSyxFQUFJLGlEQUNQLEtBQUtDLE9BQUwsQ0FBZSxFQUFmLENBRE8sd0JBRVAsS0FBS0MsSUFBTCxDQUFZLEdBQUlDLENBQUFBLFFBQUosRUFBWixDQUZPLHdCQUdQLEtBQUtDLElBQUwsQ0FBWSxHQUFJRCxDQUFBQSxRQUFKLEVBQVosQ0FITyx3QkFJUCxLQUFLRCxJQUFMLENBQVVHLElBQVYsQ0FBaUIsS0FBS0QsSUFBdEIsQ0FKTyx5QkFLUCxLQUFLQSxJQUFMLENBQVVFLElBQVYsQ0FBaUIsS0FBS0osSUFB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QSxJQUFaLENBSGlELHlCQUlqRCxLQUFLRCxJQUFMLENBQVlBLElBQVosQ0FDRCxDQU5ZLEMseUJBUWZhLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQnZCLFNBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUaGlzIGlzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBhIExSVSAobGVhc3QgcmVjZW50bHkgdXNlZCkgY2FjaGVcbiAqIFRvIHNldCB1cCBhbmQgcnVuIHRoZSBjb2RlIHBsZWFzZSBjaGVjayBSRUFETUUubWRcbiAqL1xuY2xhc3MgTHJ1Q2hhY2hlIHtcbiAgLyoqXG4gICAqIFRoZSBjb25zdHJ1Y3RvciBvZiB0aGUgY2FjaGVcbiAgICogVGhpcyBkZWZpbmVzIHRoZSBtYXhpbXVtIHNpemUgb2YgdGhlIGNhY2hlIGFuZCByZXNldHMgY2FjaGUgdG8gZW1wdHlcbiAgICogQHBhcmFtIHtudW1iZXJ9IHNpemVcbiAgICovXG4gIGNvbnN0cnVjdG9yIChzaXplKSB7XG4gICAgaWYgKHR5cGVvZiAoc2l6ZSkgIT09ICdudW1iZXInKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBzaXplIGZvciBDYWNoZSBzaG91bGQgYmUgYSBudW1iZXIhJylcbiAgICB9XG4gICAgaWYgKHNpemUgPCAxIHx8IHNpemUgPiAxMDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignU2l6ZSBvZiB0aGUgQ2FjaGUgbmVlZHMgdG8gYmUgYmV0d2VlbiAxIGFuZCAxMDAhJylcbiAgICB9XG4gICAgdGhpcy5zaXplID0gc2l6ZVxuICAgIHRoaXMucmVzZXQoKVxuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgcmVzZXRzIHRoZSBjYWNoZVxuICAgKi9cbiAgcmVzZXQgKCkge1xuICAgIHRoaXMuc3RvcmFnZSA9IHt9XG4gICAgdGhpcy5oZWFkID0gbmV3IExpbmtOb2RlKClcbiAgICB0aGlzLnRhaWwgPSBuZXcgTGlua05vZGUoKVxuICAgIHRoaXMuaGVhZC5uZXh0ID0gdGhpcy50YWlsXG4gICAgdGhpcy50YWlsLnByZXYgPSB0aGlzLmhlYWRcbiAgICB0aGlzLnRvdGFsTnVtYmVyT2ZJdGVtcyA9IDBcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGRlbGV0ZXMgYW4gaXRlbSBmcm9tIHRoZSBjYWNoZSB1c2luZyB0aGUga2V5XG4gICAqIEBwYXJhbSB7Kn0ga2V5IFRoZSBrZXkgb2YgdGhlIGl0ZW0gdG8gYmUgZGVsZXRlXG4gICAqL1xuICBkZWxldGUgKGtleSkge1xuICAgIGlmICh0aGlzLnN0b3JhZ2Vba2V5XSkge1xuICAgICAgY29uc3Qgb2xkTmV4dCA9IHRoaXMuc3RvcmFnZVtrZXldLm5leHRcbiAgICAgIGNvbnN0IG9sZFByZXYgPSB0aGlzLnN0b3JhZ2Vba2V5XS5wcmV2XG4gICAgICB0aGlzLnN0b3JhZ2Vba2V5XS5wcmV2Lm5leHQgPSBvbGROZXh0XG4gICAgICB0aGlzLnN0b3JhZ2Vba2V5XS5uZXh0LnByZXYgPSBvbGRQcmV2XG4gICAgICBkZWxldGUgdGhpcy5zdG9yYWdlW2tleV1cbiAgICAgIHRoaXMudG90YWxOdW1iZXJPZkl0ZW1zLS1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyBhIHByaXZhdGUgbWV0aG9kIHRvIGFkZCBhbiBpdGVtIHRvIHRoZSBmcm9udCBvZiB0aGUgY2FjaGVcbiAgICogQHBhcmFtIHtMaW5rTm9kZX0gbm9kZVxuICAgKi9cbiAgX2FkZFRvRnJvbnQgKG5vZGUpIHtcbiAgICBub2RlLnByZXYgPSB0aGlzLmhlYWRcbiAgICBub2RlLm5leHQgPSB0aGlzLmhlYWQubmV4dFxuICAgIHRoaXMuc3RvcmFnZVtub2RlLmtleV0gPSBub2RlXG4gICAgdGhpcy5oZWFkLm5leHQucHJldiA9IG5vZGVcbiAgICB0aGlzLmhlYWQubmV4dCA9IG5vZGVcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGdldHMvcmVhZHMgdGhlIHZhbHVlIG9mIGFuIGl0ZW0gZnJvbSB0aGUgY2FjaGVcbiAgICogQHBhcmFtIHsqfSBrZXkgdGhlIGtleSBvZiB0aGUgaXRlbSB0byBnZXQgZnJvbSB0aGUgY2FjaGVcbiAgICovXG4gIGdldCAoa2V5KSB7XG4gICAgbGV0IHZhbHVlID0gbnVsbFxuICAgIC8vIHdoaWxlIHJlYWRpbmcgdGhlIHZhbHVlLCB0aGlzIGl0ZW0gaXMgbW92ZWQgdG8gdGhlIGZyb250L3RvcCBvZiB0aGUgY2FjaGVcbiAgICAvLyBpbmRpY2F0aW5nIHRoaXMgaXRlbSBpcyByZWNlbnRseSB1c2VkXG4gICAgaWYgKHRoaXMuc3RvcmFnZVtrZXldKSB7XG4gICAgICB2YWx1ZSA9IHRoaXMuc3RvcmFnZVtrZXldLnZhbHVlXG4gICAgICBjb25zdCBuZXdOb2RlID0gbmV3IExpbmtOb2RlKGtleSwgdmFsdWUpXG4gICAgICB0aGlzLmRlbGV0ZShrZXkpXG4gICAgICB0aGlzLl9hZGRUb0Zyb250KG5ld05vZGUpXG4gICAgICB0aGlzLnRvdGFsTnVtYmVyT2ZJdGVtcysrXG4gICAgfVxuICAgIHJldHVybiB2YWx1ZVxuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgYWRkcyBhbiBpdGVtIGlmIGl0J3Mgbm90IGFscmVhZHkgaW4gdGhlIGNhY2hlLFxuICAgKiBhbmQgdXBkYXRlcyB0aGUgaXRlbSBpZiBpdCBpcyBhbHJlYWR5IGluLlxuICAgKiBAcGFyYW0geyp9IGtleSB0aGUga2V5IG9mIHRoZSBpdGVtIHRvIGFkZC91cGRhdGVcbiAgICogQHBhcmFtIHsqfSB2YWx1ZSB0aGUgdmFsdWUgb2YgdGhlIGl0ZW0gdG8gYWRkL3VwZGF0ZVxuICAgKi9cbiAgcHV0IChrZXksIHZhbHVlKSB7XG4gICAgLy8gaWYgdGhlIGtleSBhbHJlYWR5IGV4aXN0cywgZGVsZXRlIGl0IGZpcnN0IHNvIHdlIGNhbiBhZGQgaXQgYmFjayB0byB0aGUgaGVhZCBvZiB0aGUgbGlzdCBsYXRlclxuICAgIHRoaXMuZGVsZXRlKGtleSlcbiAgICBjb25zdCBuZXdOb2RlID0gbmV3IExpbmtOb2RlKGtleSwgdmFsdWUpXG4gICAgdGhpcy5fYWRkVG9Gcm9udChuZXdOb2RlKVxuICAgIHRoaXMudG90YWxOdW1iZXJPZkl0ZW1zKytcbiAgICAvLyBpZiB0aGUgY2FjaGUgaXMgYXQgY2FwYWNpdHksIHRoZSBsYXN0IGl0ZW0gaW4gdGhlIGNhY2hlIChsZWFzdCB1c2VkIGl0ZW0pIHdpbGwgYmUgcmVtb3ZlZFxuICAgIGlmICh0aGlzLnRvdGFsTnVtYmVyT2ZJdGVtcyA+IHRoaXMuc2l6ZSkge1xuICAgICAgdGhpcy5kZWxldGUodGhpcy50YWlsLnByZXYua2V5KVxuICAgICAgdGhpcy50b3RhbE51bWJlck9mSXRlbXMtLVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFRoaXMgY2xhc3MgaXMgYW4gaW1wbGVtZW50YXRpb24gb2YgdGhlIGRvdWJseSBsaW5rZWQgbGlzdCBkYXRhIHN0cnVjdHVyZVxuICogVGhpcyBlbnN1cmVzIGZhc3QgbG9va3VwcyBhbmQgZmFzdCB1cGRhdGVzIChPKDEpKVxuICovXG5jbGFzcyBMaW5rTm9kZSB7XG4gIGNvbnN0cnVjdG9yIChrZXksIHZhbHVlLCBwcmV2ID0gbnVsbCwgbmV4dCA9IG51bGwpIHtcbiAgICB0aGlzLmtleSA9IGtleVxuICAgIHRoaXMudmFsdWUgPSB2YWx1ZVxuICAgIHRoaXMucHJldiA9IHByZXZcbiAgICB0aGlzLm5leHQgPSBuZXh0XG4gIH1cbn1cbm1vZHVsZS5leHBvcnRzID0gTHJ1Q2hhY2hlXG4iXX0=